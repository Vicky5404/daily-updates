name: Dark Green Daily Log
permissions:
  contents: write
on:
  schedule:
    # Runs at 04:30 UTC (10:00 AM IST) and 16:30 UTC (10:00 PM IST)
    - cron: '30 4,16 * * *'
  workflow_dispatch: # Allows you to trigger it manually for testing

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Generate Deep Activity
        run: |
          # 1. Setup Identity (MANDATORY: Use your GitHub email)
          git config --local user.email "vickykapro54@gmail.com"
          git config --local user.name "Vicky5404"

          # 2. Create directory for logs
          mkdir -p daily-logs

          # 3. Meaningful Technical Topics
          TOPICS=(
            "react-performance-hooks" 
            "nextjs-edge-runtime" 
            "typescript-utility-types" 
            "nodejs-worker-threads" 
            "postgresql-query-optimization"
            "clean-architecture-patterns"
            "microservices-communication"
          )
          
          # 4. LOOP 5 TIMES PER RUN (Total 10 commits/day for Dark Green)
          for i in {1..5}
          do
            # Pick random topic and generate unique filename
            RANDOM_TOPIC=${TOPICS[$RANDOM % ${#TOPICS[@]}]}
            UNIQUE_ID=$(date +%s%N)
            FILENAME="daily-logs/${RANDOM_TOPIC}-${UNIQUE_ID: -6}.md"
            TIMESTAMP=$(date +'%Y-%m-%d %H:%M:%S')

            # Create a meaningful Markdown file
            echo "## Deep Dive: ${RANDOM_TOPIC//-/ }" > $FILENAME
            echo "Logged on: $TIMESTAMP" >> $FILENAME
            echo -e "\n### Technical Analysis\n" >> $FILENAME
            echo "Current focus is on scaling $RANDOM_TOPIC. Optimizing for latency and ensuring type-safety across the full-stack layer." >> $FILENAME
            echo -e "\n---\n*Automated internal dev-log for profile synchronization.*" >> $FILENAME

            # Commit each file individually
            git add .
            git commit -m "feat: optimize $RANDOM_TOPIC logic ($TIMESTAMP) [skip ci]"
          done

          # 5. Push all 5 commits
          git push
